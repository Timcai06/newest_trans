<!DOCTYPE html>
<!-- 单词翻译助手 - 弹出页面HTML结构 -->
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <!-- 响应式设计视口设置 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 页面标题 -->
  <title>翻译记录</title>
  <!-- 引入样式文件 -->
  <link rel="stylesheet" href="../components/styles/variables.css">
  <link rel="stylesheet" href="../components/styles/reset.css">
  <link rel="stylesheet" href="../components/styles/utils.css">
  <link rel="stylesheet" href="../components/styles/animations.css">
  <link rel="stylesheet" href="../components/base/button.css">
  <link rel="stylesheet" href="../components/base/card.css">
  <link rel="stylesheet" href="../components/base/dialog.css">
  <link rel="stylesheet" href="../components/base/input.css">
  <link rel="stylesheet" href="../components/base/toast.css">
  <link rel="stylesheet" href="../components/complex/learning-panel.css">
  <link rel="stylesheet" href="../components/complex/filter-panel.css">
  <link rel="stylesheet" href="../components/complex/word-drawer.css">
  <link rel="stylesheet" href="popup.css">
  <!-- 引入主题管理模块 -->
  <script src="../modules/theme-manager.js"></script>
  <!-- 引入动态背景管理模块 -->
  <script src="../modules/dynamic-background-manager.js"></script>
  <!-- 引入粒子特效模块 -->
  <script src="../modules/particle-network.js"></script>
  <!-- 引入监控与错误处理工具 -->
  <script src="../modules/utils-monitor.js"></script>
</head>
<body>
  <!-- Splash屏幕 - 显示开场动画 -->
  <div id="splashScreen" class="splash-screen">
    <!-- 粒子容器 -->
    <div class="particles-container">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
    
    <!-- 光效容器 -->
    <div class="light-effect"></div>
    <div class="light-rings"></div>
    <div class="light-rings"></div>
    <div class="light-rings"></div>
    <div class="light-rings"></div>
    
    <!-- 波浪效果容器 -->
    <div class="waves-container">
      <div class="wave wave-1"></div>
      <div class="wave wave-2"></div>
      <div class="wave wave-3"></div>
    </div>
    
    <!-- 主要内容 -->
    <div class="splash-content">
      <!-- 黑洞容器 -->
      <div class="blackhole-container">
        <div class="blackhole-glow"></div>
        <div class="blackhole"></div>
        <div class="blackhole-outer"></div>
      </div>
      
      <h1 class="app-name-3d">
        <span class="letter">单</span>
        <span class="letter">词</span>
        <span class="letter">翻</span>
        <span class="letter">译</span>
        <span class="letter">助</span>
        <span class="letter">手</span>
      </h1>
      <div class="loading-indicator"></div>
    </div>
  </div>

  <!-- 主容器 - 包含所有页面内容 -->
  <div class="container">
    <!-- 流光进度条 -->
    <div class="stream-progress-bar" id="streamProgressBar">
      <div class="progress-track">
        <div class="progress-glow"></div>
      </div>
    </div>
    
    <!-- 首次使用引导遮罩层 -->
    <div id="guideOverlay" class="guide-overlay" style="display: none;">
      <div class="guide-card">
        <div class="guide-steps">
          <!-- 步骤 1 -->
          <div class="guide-step active" data-step="1">
            <div class="guide-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
              </svg>
            </div>
            <h3>即时翻译</h3>
            <p>双击单词或选中一段文本，翻译结果即刻呈现。</p>
          </div>
          <!-- 步骤 2 -->
          <div class="guide-step" data-step="2">
            <div class="guide-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
            </div>
            <h3>快捷操作</h3>
            <p>选中文字后，按 <strong>Enter</strong> 键或点击 <strong>右键</strong> 即可快速翻译。</p>
          </div>
          <!-- 步骤 3 -->
          <div class="guide-step" data-step="3">
            <div class="guide-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2 2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"></path>
                <path d="M12 22v-6"></path>
                <path d="M8 8v1a4 4 0 0 0 8 0V8"></path>
                <rect x="3" y="10" width="18" height="12" rx="2"></rect>
              </svg>
            </div>
            <h3>AI 深度解析</h3>
            <p>点击已翻译单词，AI 将为您提供精准的语境释义。</p>
          </div>
        </div>
        
        <div class="guide-controls">
          <label class="dont-show-again">
            <input type="checkbox" id="guideDontShow" checked>
            不再显示
          </label>
          <div class="guide-buttons">
            <button id="guideNextBtn" class="primary-btn">下一步</button>
            <button id="guideFinishBtn" class="primary-btn" style="display: none;">开始使用</button>
          </div>
        </div>
        
        <div class="guide-dots">
          <span class="dot active"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
    </div>

    <div id="homePage" class="page active">
      <!-- 页面头部 -->
      <header class="header">
        <h1>
          <svg class="icon-svg header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
          翻译记录
        </h1>
        <!-- 统计信息显示区域 -->
        <div class="stats">
          <span id="totalWords">0</span> 个翻译记录
        </div>
        <!-- 设置按钮 -->
        <button id="settingsBtn" class="settings-btn">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
          设置
        </button>
      </header>

      <!-- 首页内容区域 - 左右两列布局 -->
      <div class="home-content">
        <!-- 左侧统计面板 -->
        <div class="stats-panel">
          <!-- 单词统计卡片 -->
          <div class="stat-card" data-page="word">
            <div class="stat-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </div>
            <div class="stat-title">单词</div>
            <div class="stat-count" id="wordCount">0</div>
          </div>

          <!-- 词组统计卡片 -->
          <div class="stat-card" data-page="phrase">
            <div class="stat-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="12" y1="18" x2="12" y2="12"></line>
                <line x1="9" y1="15" x2="15" y2="15"></line>
              </svg>
            </div>
            <div class="stat-title">词组</div>
            <div class="stat-count" id="phraseCount">0</div>
          </div>

          <!-- 句子统计卡片 -->
          <div class="stat-card" data-page="sentence">
            <div class="stat-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
            </div>
            <div class="stat-title">句子</div>
            <div class="stat-count" id="sentenceCount">0</div>
          </div>

          <!-- 星标单词统计卡片 -->
          <div class="stat-card" data-page="starred">
            <div class="stat-icon">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
              </svg>
            </div>
            <div class="stat-title">星标单词</div>
            <div class="stat-count" id="starredCount">0</div>
          </div>
        </div>

        <!-- 右侧学习面板 -->
        <div class="learning-panel">
          <div class="learning-header">
            <h3>
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
              </svg>
              单词学习
            </h3>
            <button class="learning-btn header-btn dashboard-icon-btn" id="dashboardBtn" title="学习Dashboard">
              <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="9"></rect>
                <rect x="14" y="3" width="7" height="5"></rect>
                <rect x="14" y="12" width="7" height="9"></rect>
                <rect x="3" y="16" width="7" height="5"></rect>
              </svg>
            </button>
          </div>
          <div class="learning-content" id="learningContent">
            <div class="learning-actions">
              <button class="learning-btn" id="startLearningBtn">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path>
                  <path d="M12 15l-3-3a22 22 0 0 1 2-2 11.5 11.5 0 0 0-5.5 5.5l-3-3a22 22 0 0 1 2-2 11.5 11.5 0 0 0-5.5 5.5"></path>
                  <path d="M12 15l6-6.5a22 22 0 0 1 2 2 11.5 11.5 0 0 0-5.5 5.5"></path>
                  <path d="M12 15l3 3a22 22 0 0 1-2 2 11.5 11.5 0 0 0 5.5-5.5"></path>
                </svg>
                开始学习
              </button>
              <button class="learning-btn" id="reviewDifficultBtn">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                  <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                  <line x1="6" y1="1" x2="6" y2="4"></line>
                  <line x1="10" y1="1" x2="10" y2="4"></line>
                  <line x1="14" y1="1" x2="14" y2="4"></line>
                </svg>
                复习难点
              </button>
              <button class="learning-btn" id="dailyChallengeBtn">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <circle cx="12" cy="12" r="6"></circle>
                  <circle cx="12" cy="12" r="2"></circle>
                </svg>
                每日挑战
              </button>
            </div>
            <div class="learning-stats-display">
              <div class="stat-row">
                <span class="stat-label">今日学习：</span>
                <span class="stat-value" id="todayLearned">0</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">掌握程度：</span>
                <span class="stat-value" id="masteryLevel">0%</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">待复习：</span>
                <span class="stat-value" id="toReview">0</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 单词列表页面 - 显示具体类别的翻译记录 -->
    <div id="wordListPage" class="page">
      <!-- 列表页面头部 -->
      <header class="header">
        <!-- 返回按钮 -->
        <button class="back-btn" id="backBtn">← 返回</button>
        <h1 id="pageTitle">翻译记录</h1>
        <div class="stats">
          <span id="pageStats">0</span> 个
        </div>
      </header>
      
      <div class="controls">
        <!-- 搜索框 -->
        <div class="search-container">
          <div class="liquid-border-layer"></div>
          <input type="text" id="searchInput" placeholder="搜索单词..." class="search-input">
        </div>

        <!-- 操作按钮：筛选 + 清空记录 -->
        <div class="controls-actions">
          <button id="filterBtn" class="filter-btn" title="筛选">
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
            <span>筛选</span>
          </button>
          <button id="clearAllBtn" class="clear-btn" title="清空记录">
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            <span>清空记录</span>
          </button>
        </div>
      </div>
      
      <div class="word-list" id="wordList">
        <div class="empty-state">暂无翻译记录</div>
      </div>
    </div>

    <!-- 学习模式选择页面 -->
    <div id="modeSelectionPage" class="page">
      <canvas id="particleCanvas"></canvas>
      <header class="header">
        <button class="back-btn" id="backBtnFromModeSelection">← 返回</button>
        <h1>选择学习模式</h1>
      </header>
      
      <div class="mode-selection-content">
        <div class="mode-icons-container">
          <!-- 闪卡模式 -->
          <div class="mode-icon-item" data-mode="flashcard">
            <div class="mode-icon-circle">
              <svg class="mode-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <rect x="5" y="6" width="14" height="16" rx="2" transform="rotate(-5 12 14)" />
                <rect x="5" y="6" width="14" height="16" rx="2" transform="rotate(5 12 14)" fill="rgba(255,255,255,0.05)" />
                <path d="M12 12l1 2 2.5-1-1.5 2.5 1 1.5-2.5-0.5-2 1.5 0.5-2.5-2-1 2.5-0.5z" fill="currentColor" fill-opacity="0.2" stroke-width="1"/>
              </svg>
            </div>
            <div class="mode-label">
              <h3>闪卡模式</h3>
              <p>翻转记忆</p>
            </div>
          </div>
          
          <!-- 测验模式 -->
          <div class="mode-icon-item" data-mode="quiz">
            <div class="mode-icon-circle">
              <svg class="mode-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <path d="M14 2v6h6" />
                <path d="M9 15l2 2 4-4" />
              </svg>
            </div>
            <div class="mode-label">
              <h3>测验模式</h3>
              <p>四选一测试</p>
            </div>
          </div>
          
          <!-- 拼写模式 -->
          <div class="mode-icon-item" data-mode="spelling">
            <div class="mode-icon-circle">
              <svg class="mode-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 19l7-7 3 3-7 7-3-3z" />
                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" />
                <path d="M2 2l7.586 7.586" />
              </svg>
            </div>
            <div class="mode-label">
              <h3>拼写模式</h3>
              <p>强化拼写</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 学习模式页面 -->
    <div id="learningPage" class="page">
      <header class="header">
        <button class="back-btn" id="backBtnFromLearning">← 返回</button>
        <h1>📚 单词学习</h1>
        <div class="learning-stats">
          <span id="learningProgress">0/20</span>
        </div>
      </header>
      
      <div class="learning-content">
        <div class="current-mode-container">
          <div id="currentModeBadge" class="current-mode-badge"></div>
        </div>
        
        <!-- 学习进度指示器 -->
        <div class="learning-progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="learning-area" id="learningArea">
          <div class="flashcard-mode active" id="flashcardMode">
            <div class="flashcard">
              <div class="card-inner">
                <div class="card-front card-face">
                  <div class="word-display" id="currentWord">Loading...</div>
                  <div class="phonetic-display" id="currentPhonetic"></div>
                  <div class="part-of-speech" id="currentPOS"></div>
                </div>
                <div class="card-back card-face">
                  <div class="translation-display" id="currentTranslation">点击翻转查看翻译</div>
                  <div class="word-examples" id="currentExamples"></div>
                </div>
              </div>
            </div>
            <div class="card-controls">
              <button class="control-btn difficulty-btn" data-difficulty="hard">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="8" x2="12" y2="12"></line>
                  <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                困难
              </button>
              <button class="control-btn flip-btn" id="flipCard">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
                </svg>
                翻转
              </button>
              <button class="control-btn difficulty-btn" data-difficulty="easy">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                  <line x1="9" y1="9" x2="9.01" y2="9"></line>
                  <line x1="15" y1="9" x2="15.01" y2="9"></line>
                </svg>
                简单
              </button>
            </div>
          </div>

          <div class="quiz-mode" id="quizMode">
            <div class="quiz-container">
              <div class="quiz-question">
                <div class="question-text" id="quizQuestion">Loading...</div>
                <div class="quiz-options" id="quizOptions">
                  <!-- 选项将动态生成 -->
                </div>
              </div>
              <div class="quiz-result" id="quizResult" style="display: none;">
                <div class="result-icon" id="resultIcon"></div>
                <div class="result-text" id="resultText"></div>
                <button class="control-btn next-btn" id="nextQuiz">下一题</button>
              </div>
            </div>
          </div>

          <div class="spelling-mode" id="spellingMode">
            <div class="spelling-question">
              <div class="spelling-prompt" id="spellingPrompt">Loading...</div>
              <div class="spelling-input-area">
                <input type="text" class="spelling-input" id="spellingInput" placeholder="输入单词拼写...">
                <button class="control-btn submit-btn" id="submitSpelling">提交</button>
              </div>
              <div class="spelling-result" id="spellingResult" style="display: none;">
                <div class="spelling-feedback" id="spellingFeedback"></div>
                <div class="correct-spelling" id="correctSpelling"></div>
                <button class="control-btn next-btn" id="nextSpelling">下一题</button>
              </div>
            </div>
          </div>
        </div>

        <div class="learning-summary" id="learningSummary" style="display: none;">
          <div class="summary-title">
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 32px; height: 32px; color: var(--accent-primary);">
              <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>
            </svg>
            学习完成！
          </div>
          <div class="summary-stats">
            <div class="stat-item">
              <span class="stat-label">总题数：</span>
              <span class="stat-value" id="totalQuestions">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">正确数：</span>
              <span class="stat-value" id="correctAnswers">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">正确率：</span>
              <span class="stat-value" id="accuracyRate">0%</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">学习时间：</span>
              <span class="stat-value" id="learningTime">0分钟</span>
            </div>
          </div>
          <div class="summary-actions">
            <div class="primary-actions">
              <button class="mode-icon-item summary-btn" id="restartLearning">
                <div class="mode-icon-circle">
                  <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M23 4v6h-6"></path>
                    <path d="M1 20v-6h6"></path>
                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                  </svg>
                </div>
                <div class="mode-label">
                  <h3>重新学习</h3>
                </div>
              </button>
              
              <button class="mode-icon-item summary-btn" id="reviewMistakes">
                <div class="mode-icon-circle">
                  <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                  </svg>
                </div>
                <div class="mode-label">
                  <h3>复习错题</h3>
                </div>
              </button>
            </div>
            
            <button class="mode-icon-item summary-btn secondary" id="startNewSession">
              <div class="mode-icon-circle small">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
              </div>
              <div class="mode-label">
                <h3>返回首页</h3>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 设置页面 -->
    <div id="settingsPage" class="page">
      <header class="header">
        <button class="back-btn" id="backBtnFromSettings">← 返回</button>
        <h1>⚙️ 设置</h1>
      </header>
      
      <div class="settings-content">
        <div class="settings-section">
          <h3>
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
            </svg>
            外观设置
          </h3>
          <div class="setting-item">
            <label for="backgroundTheme">背景颜色主题：</label>
            <select id="backgroundTheme">
              <option value="default">默认主题</option>
              <option value="dark">深色主题</option>
              <option value="blue">蓝色主题</option>
              <option value="purple">紫色主题</option>
              <option value="green">绿色主题</option>
              <option value="rainbow">彩虹主题</option>
              <option value="sunset">日落主题</option>
            </select>
          </div>
          <div class="setting-item" id="customBackgroundColor" style="display: none;">
            <label for="backgroundColor">自定义背景颜色：</label>
            <input type="color" id="backgroundColor" value="#667eea">
          </div>
          <div class="setting-item">
            <label for="uiElementTheme">UI元素主题：</label>
            <select id="uiElementTheme">
              <option value="default">浅色模式 (Light)</option>
              <option value="dark">深色模式 (Dark)</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="highlightTheme">高亮颜色主题：</label>
            <select id="highlightTheme">
              <option value="default">默认主题</option>
              <option value="dark">深色主题</option>
              <option value="colorful">彩色主题</option>
              <option value="custom">自定义</option>
            </select>
          </div>
          <div class="setting-item" id="customColors" style="display: none;">
            <h4>自定义颜色：</h4>
            <div class="color-picker-group">
              <div class="color-item">
                <label for="colorNoun">名词：</label>
                <input type="color" id="colorNoun" value="#4CAF50">
              </div>
              <div class="color-item">
                <label for="colorVerb">动词：</label>
                <input type="color" id="colorVerb" value="#2196F3">
              </div>
              <div class="color-item">
                <label for="colorAdjective">形容词：</label>
                <input type="color" id="colorAdjective" value="#FF9800">
              </div>
              <div class="color-item">
                <label for="colorAdverb">副词：</label>
                <input type="color" id="colorAdverb" value="#9C27B0">
              </div>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3>
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="10" rx="2"></rect>
              <circle cx="12" cy="5" r="2"></circle>
              <path d="M12 7v4"></path>
              <line x1="8" y="16" x2="8" y="16"></line>
              <line x1="16" y="16" x2="16" y="16"></line>
            </svg>
            AI 翻译设置
          </h3>
          <div class="setting-item">
            <label for="aiProvider">AI 提供商：</label>
            <select id="aiProvider">
              <option value="openai">OpenAI</option>
              <option value="deepseek">DeepSeek</option>
              <option value="custom">自定义</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="aiApiKey">AI Key：</label>
            <input type="password" id="aiApiKey" placeholder="输入 API Key">
          </div>
          <div class="setting-item">
            <label for="aiModel">模型名称：</label>
            <input type="text" id="aiModel" placeholder="gpt-3.5-turbo">
          </div>
          <div class="setting-item" id="aiApiUrlContainer" style="display: none;">
            <label for="aiApiUrl">API 地址：</label>
            <input type="text" id="aiApiUrl" placeholder="https://api.example.com/v1/chat/completions">
          </div>
        </div>

        <div class="settings-section">
          <h3>
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="2" y="12" x2="22" y="12"></line>
              <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </svg>
            常规翻译设置
          </h3>
          <div class="setting-item">
            <label for="translationAPI">备用翻译：</label>
            <select id="translationAPI">
              <option value="youdao">有道翻译</option>
              <option value="baidu">百度翻译</option>
              <option value="google">谷歌翻译</option>
              <option value="mymemory">MyMemory</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="apiKey">有道 Key：</label>
            <input type="password" id="apiKey" placeholder="输入有道 API Key">
          </div>
          <div class="setting-item">
            <label for="apiSecret">有道 Secret：</label>
            <input type="password" id="apiSecret" placeholder="输入有道 API Secret">
          </div>
        </div>

        <div class="settings-section">
          <h3>
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
            学习设置
          </h3>
          <div class="setting-item">
            <label for="dailyGoal">每日学习目标：</label>
            <input type="number" id="dailyGoal" value="20" min="5" max="100">
            <span>个单词</span>
          </div>
          <div class="setting-item">
            <label for="learningMode">学习模式：</label>
            <select id="learningMode">
              <option value="normal">普通模式</option>
              <option value="intensive">强化模式</option>
              <option value="review">复习模式</option>
            </select>
          </div>
        </div>

        <div class="settings-section">
          <h3>
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
              <polyline points="17 21 17 13 7 13 7 21"></polyline>
              <polyline points="7 3 7 8 15 8"></polyline>
            </svg>
            数据管理
          </h3>
          <div class="setting-item">
            <label>单词数据:</label>
            <div class="button-group">
              <button id="exportBtn" class="settings-action-btn">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                导出单词
              </button>
              <button id="importBtn" class="settings-action-btn">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                导入单词
              </button>
            </div>
          </div>
          <div class="setting-item">
            <label>应用设置:</label>
            <div class="button-group">
              <button id="exportSettingsBtn" class="settings-action-btn">导出设置</button>
              <button id="importSettingsBtn" class="settings-action-btn">导入设置</button>
            </div>
          </div>
          <div class="setting-item">
            <button id="resetSettingsBtn" class="settings-action-btn reset-btn">重置所有设置</button>
          </div>
        </div>

        <div class="settings-actions">
          <button id="saveSettingsBtn" class="save-btn">保存设置</button>
          <button id="cancelSettingsBtn" class="cancel-btn">取消</button>
        </div>
      </div>
    </div>

    <!-- 导入对话框 -->
    <div id="importDialog" class="dialog-overlay" style="display: none;">
      <div class="dialog">
        <div class="dialog-header">
          <h3>📥 导入数据</h3>
          <button class="dialog-close" id="closeImportDialog">×</button>
        </div>
        <div class="dialog-content">
          <div class="import-options">
            <label for="importMode">导入方式：</label>
            <select id="importMode">
              <option value="merge">合并导入（保留现有数据）</option>
              <option value="replace">覆盖导入（清空现有数据）</option>
            </select>
          </div>
          <div class="file-upload">
            <input type="file" id="importFile" accept=".json,.csv" class="file-input">
            <label for="importFile" class="file-label">选择文件</label>
          </div>
          <div class="import-preview" id="importPreview" style="display: none;">
            <h4>导入预览</h4>
            <div id="previewContent"></div>
          </div>
        </div>
        <div class="dialog-actions">
          <button id="confirmImportBtn" class="confirm-btn" disabled>确认导入</button>
          <button id="cancelImportBtn" class="cancel-btn">取消</button>
        </div>
      </div>
    </div>

    <!-- 导出对话框 -->
    <div id="exportDialog" class="dialog-overlay" style="display: none;">
      <div class="dialog">
        <div class="dialog-header">
          <h3>📤 导出数据</h3>
          <button class="dialog-close" id="closeExportDialog">×</button>
        </div>
        <div class="dialog-content">
          <div class="export-options">
            <label for="exportContent">导出内容：</label>
            <select id="exportContent">
              <option value="all">所有数据</option>
              <option value="words">仅单词</option>
              <option value="phrases">仅词组</option>
              <option value="sentences">仅句子</option>
              <option value="starred">仅星标</option>
            </select>
          </div>
          <div class="export-format">
            <label for="exportFormat">导出格式：</label>
            <select id="exportFormat">
              <option value="json">JSON</option>
              <option value="csv">CSV</option>
            </select>
          </div>
          <div class="export-stats" id="exportStats">
            <span>预计导出：<span id="exportCount">0</span> 条记录</span>
          </div>
        </div>
        <div class="dialog-actions">
          <button id="confirmExportBtn" class="confirm-btn">确认导出</button>
          <button id="cancelExportBtn" class="cancel-btn">取消</button>
        </div>
      </div>
    </div>
    
    <!-- 详细翻译对话框 - 参照网易有道词典设计 -->
    <div id="detailTranslationDialog" class="dialog-overlay" style="display: none;">
      <div class="dialog translation-dialog">
        <div class="dialog-header">
          <h3 id="translationDialogTitle">📚 详细翻译</h3>
          <button class="dialog-close" id="closeTranslationDialog">×</button>
        </div>
        <div class="dialog-content translation-content">
          <!-- 单词标题区域 -->
          <div class="translation-header">
            <h1 class="translation-word" id="translationWord">word</h1>
            <div class="translation-phonetic" id="translationPhonetic">/wɜːrd/</div>
            <div class="translation-main-definition" id="translationMainDefinition"></div>
            <button class="pronunciation-btn" id="pronunciationBtn">🔊 发音</button>
          </div>
          
          <!-- 主要释义区域 -->
          <div class="main-definitions" id="mainDefinitions">
            <!-- 动态生成的释义内容 -->
          </div>
          
          <!-- 例句区域 -->
          <div class="examples-section">
            <h3>📝 例句</h3>
            <div class="examples-list" id="examplesList">
              <!-- 动态生成的例句内容 -->
            </div>
          </div>
          
          <!-- 同义词/反义词区域 -->
          <div class="synonyms-antonyms">
            <div class="synonyms">
              <h4>🔄 同义词</h4>
              <div class="synonyms-list" id="synonymsList">
                <!-- 动态生成的同义词内容 -->
              </div>
            </div>
            <div class="antonyms">
              <h4>🔀 反义词</h4>
              <div class="antonyms-list" id="antonymsList">
                <!-- 动态生成的反义词内容 -->
              </div>
            </div>
          </div>
          
          <!-- 同根词区域 -->
          <div class="word-roots">
            <h3>🌳 同根词</h3>
            <div class="roots-list" id="rootsList">
              <!-- 动态生成的同根词内容 -->
            </div>
          </div>
          
          <!-- 更多信息区域 -->
          <div class="more-info">
            <h3>ℹ️ 更多信息</h3>
            <div class="info-grid" id="infoGrid">
              <!-- 动态生成的更多信息内容 -->
            </div>
          </div>
        </div>
        <div class="dialog-actions">
          <button class="action-btn copy-btn" id="copyTranslationBtn">📋 复制</button>
          <button class="action-btn share-btn" id="shareTranslationBtn">📤 分享</button>
          <button class="action-btn" id="addToReviewBtn">📚 添加到复习</button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="modules/data-manager.js"></script>
  <script src="modules/page-manager.js"></script>
  <script src="modules/learning-manager.js"></script>
  <script src="modules/view-manager.js"></script>
  <script src="modules/learning-stats.js"></script>
  <script src="modules/home-manager.js"></script>
  <script src="modules/utils-manager.js"></script>
  <script src="modules/word-list-manager.js"></script>
  <script src="modules/settings-manager.js"></script>
  <script src="modules/init-manager.js"></script>
  <!-- 引入新组件 -->
  <script src="../components/complex/filter-panel.js"></script>
  <script src="../components/complex/word-drawer.js"></script>
  <script src="popup-components.js"></script>
  <script src="popup.js"></script>
</body>
</html>
