# CSS组件同步化计划表

## 项目概述
本项目是一个单词翻译助手Chrome扩展，目前已经完成了JS组件化和模块化拆分，现在需要将CSS样式与组件化架构同步，实现完整的UI组件化。

## 计划目标
1. 将现有的`popup.css`拆分为多个功能模块CSS
2. 实现CSS与JS组件的一一对应
3. 保持CSS与JS组件相同的目录结构
4. 确保每一步拆分不影响现有功能和样式
5. 采用BEM命名规范，避免样式冲突
6. 实现样式的模块化管理和复用

## 拆分策略
1. **按组件拆分**：每个组件对应独立的CSS文件
2. **按功能拆分**：将基础样式、页面样式、动画样式分离
3. **保持一致性**：CSS文件结构与JS组件结构保持一致
4. **循序渐进**：从基础组件开始，逐步扩展到复杂组件
5. **最小化改动**：每一步只修改一个组件或功能

## 命名规范
- 采用BEM命名规范：`.block__element--modifier`
- 组件CSS文件与JS文件同名：`button.js` → `button.css`
- 页面CSS与页面功能对应：`home.js` → `home.css`
- 基础样式前缀：`base-*`
- 工具类前缀：`util-*`

## 分步实施计划

### 阶段一：准备工作（第1-2步）

#### 步骤1：创建CSS组件目录结构
- **目标**：建立与JS组件对应的CSS目录结构
- **操作**：
  1. 在`components/`目录下创建`styles/`子目录
  2. 为每个JS组件目录创建对应的CSS文件占位符
  3. 创建基础样式文件
- **涉及文件**：
  - `components/styles/variables.css`（新增）
  - `components/styles/reset.css`（新增）
  - `components/styles/utils.css`（新增）
- **验证**：目录结构创建成功，无语法错误

#### 步骤2：提取CSS变量和基础样式
- **目标**：将全局CSS变量和基础样式提取到独立文件
- **操作**：
  1. 从`popup.css`中提取CSS变量到`variables.css`
  2. 提取重置样式到`reset.css`
  3. 提取通用工具类到`utils.css`
- **涉及文件**：
  - `popup.css`（修改）
  - `components/styles/variables.css`（修改）
  - `components/styles/reset.css`（修改）
  - `components/styles/utils.css`（修改）
- **验证**：页面样式无变化，变量和基础样式正常工作

### 阶段二：基础组件CSS拆分（第3-7步）

#### 步骤3：拆分Button组件样式
- **目标**：将按钮样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取按钮相关样式
  2. 创建`components/base/button.css`
  3. 使用BEM命名规范重命名按钮样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的按钮样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/base/button.css`（新增）
  - `popup.html`（修改）
- **验证**：所有按钮样式正常，功能不受影响

#### 步骤4：拆分Card组件样式
- **目标**：将卡片样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取卡片相关样式
  2. 创建`components/base/card.css`
  3. 使用BEM命名规范重命名卡片样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的卡片样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/base/card.css`（新增）
  - `popup.html`（修改）
- **验证**：所有卡片样式正常，功能不受影响

#### 步骤5：拆分Dialog组件样式
- **目标**：将对话框样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取对话框相关样式
  2. 创建`components/base/dialog.css`
  3. 使用BEM命名规范重命名对话框样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的对话框样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/base/dialog.css`（新增）
  - `popup.html`（修改）
- **验证**：所有对话框样式正常，功能不受影响

#### 步骤6：拆分Input组件样式
- **目标**：将输入框样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取输入框相关样式
  2. 创建`components/base/input.css`
  3. 使用BEM命名规范重命名输入框样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的输入框样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/base/input.css`（新增）
  - `popup.html`（修改）
- **验证**：所有输入框样式正常，功能不受影响

#### 步骤7：拆分Toast组件样式
- **目标**：将提示框样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取提示框相关样式
  2. 创建`components/base/toast.css`
  3. 使用BEM命名规范重命名提示框样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的提示框样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/base/toast.css`（新增）
  - `popup.html`（修改）
- **验证**：所有提示框样式正常，功能不受影响

### 阶段三：复杂组件CSS拆分（第8-12步）

#### 步骤8：拆分Learning Panel组件样式
- **目标**：将学习面板样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取学习面板相关样式
  2. 创建`components/complex/learning-panel.css`
  3. 使用BEM命名规范重命名学习面板样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的学习面板样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/complex/learning-panel.css`（新增）
  - `popup.html`（修改）
- **验证**：学习面板样式正常，功能不受影响

#### 步骤9：拆分Search Bar组件样式
- **目标**：将搜索栏样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取搜索栏相关样式
  2. 创建`components/complex/search-bar.css`
  3. 使用BEM命名规范重命名搜索栏样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的搜索栏样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/complex/search-bar.css`（新增）
  - `popup.html`（修改）
- **验证**：搜索栏样式正常，功能不受影响

#### 步骤10：拆分Settings Panel组件样式
- **目标**：将设置面板样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取设置面板相关样式
  2. 创建`components/complex/settings-panel.css`
  3. 使用BEM命名规范重命名设置面板样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的设置面板样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/complex/settings-panel.css`（新增）
  - `popup.html`（修改）
- **验证**：设置面板样式正常，功能不受影响

#### 步骤11：拆分Stat Card组件样式
- **目标**：将统计卡片样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取统计卡片相关样式
  2. 创建`components/complex/stat-card.css`
  3. 使用BEM命名规范重命名统计卡片样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的统计卡片样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/complex/stat-card.css`（新增）
  - `popup.html`（修改）
- **验证**：统计卡片样式正常，功能不受影响

#### 步骤12：拆分Word Card组件样式
- **目标**：将单词卡片样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取单词卡片相关样式
  2. 创建`components/complex/word-card.css`
  3. 使用BEM命名规范重命名单词卡片样式类
  4. 在`popup.html`中引入新CSS文件
  5. 移除`popup.css`中已拆分的单词卡片样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/complex/word-card.css`（新增）
  - `popup.html`（修改）
- **验证**：单词卡片样式正常，功能不受影响

### 阶段四：页面样式和动画样式拆分（第13-15步）

#### 步骤13：拆分页面样式
- **目标**：将不同页面的样式拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取首页相关样式
  2. 创建`popup/pages/home.css`
  3. 从`popup.css`中提取学习页面相关样式
  4. 创建`popup/pages/learning.css`
  5. 从`popup.css`中提取设置页面相关样式
  6. 创建`popup/pages/settings.css`
  7. 在`popup.html`中引入这些页面CSS文件
  8. 移除`popup.css`中已拆分的页面样式
- **涉及文件**：
  - `popup.css`（修改）
  - `popup/pages/home.css`（新增）
  - `popup/pages/learning.css`（新增）
  - `popup/pages/settings.css`（新增）
  - `popup.html`（修改）
- **验证**：所有页面样式正常，功能不受影响

#### 步骤14：拆分动画样式
- **目标**：将动画效果拆分为独立文件
- **操作**：
  1. 从`popup.css`中提取所有动画效果
  2. 创建`components/styles/animations.css`
  3. 在`popup.html`中引入动画CSS文件
  4. 移除`popup.css`中已拆分的动画样式
- **涉及文件**：
  - `popup.css`（修改）
  - `components/styles/animations.css`（新增）
  - `popup.html`（修改）
- **验证**：所有动画效果正常，功能不受影响

#### 步骤15：清理和优化
- **目标**：清理冗余样式，优化CSS结构
- **操作**：
  1. 检查`popup.css`中是否还有剩余样式
  2. 将剩余样式分类到相应的CSS文件中
  3. 移除`popup.css`中所有已拆分的样式（如果还有）
  4. 优化CSS加载顺序
  5. 更新所有相关文件的引用
  6. 检查所有样式是否正常工作
- **涉及文件**：
  - `popup.css`（修改）
  - `popup.html`（修改）
  - 所有相关CSS文件（检查和优化）
- **验证**：所有功能正常，样式无变化

## 进度记录

| 步骤 | 模块名称 | 状态 | 完成日期 | 涉及文件 | 备注 |
|-----|---------|------|----------|----------|------|
| 1 | 创建CSS目录结构 | 已完成 | 2026-01-10 | `components/styles/`目录, 所有组件CSS文件 | 已创建components/styles目录和所有组件CSS文件占位符 |
| 2 | 提取CSS变量和基础样式 | 已完成 | 2026-01-10 | `popup.css`, `components/styles/variables.css`, `components/styles/reset.css`, `components/styles/utils.css` | 已从popup.css中提取CSS变量、重置样式和通用工具类，并在popup.html中引入了这些文件 |
| 3 | 拆分Button组件样式 | 已完成 | 2026-01-10 | `popup.css`, `components/base/button.css`, `popup.html` | 已从popup.css中提取按钮相关样式，创建了button.css文件并使用BEM命名规范重命名了样式类，同时在popup.html中引入了button.css文件。修复了按钮样式和动效问题，确保与原始样式完全一致，并移除了popup.css中已拆分的按钮样式 |
| 4 | 拆分Card组件样式 | 已完成 | 2026-01-10 | `popup.css`, `components/base/card.css`, `popup.html` | 已从popup.css中提取卡片相关样式，创建了card.css文件并使用BEM命名规范重命名了样式类，同时在popup.html中引入了card.css文件。保持了与原始样式的兼容性，包括首页卡片、单词卡片等样式，并移除了popup.css中已拆分的卡片样式 |
| 5 | 拆分Dialog组件样式 | 已完成 | 2026-01-10 | `popup.css`, `components/base/dialog.css`, `popup.html` | 已从popup.css中提取对话框相关样式，创建了dialog.css文件并使用BEM命名规范重命名了样式类，同时在popup.html中引入了dialog.css文件。包括对话框遮罩、基础样式、翻译弹窗、加载状态、错误信息等样式 |
| 6 | 拆分Input组件样式 | 已完成 | 2026-01-10 | `popup.css`, `components/base/input.css`, `popup.html` | 已从popup.css中提取输入框相关样式，创建了input.css文件并使用BEM命名规范重命名了样式类，同时在popup.html中引入了input.css文件。包括搜索框、选择器、设置页面输入框、颜色选择器、文件输入等样式 |
| 7 | 拆分Toast组件样式 | 已完成 | 2026-01-10 | `popup.css`, `components/base/toast.css`, `popup.html` | 已创建toast.css文件并使用BEM命名规范定义了提示框样式，同时在popup.html中引入了toast.css文件。包括不同类型的提示框、动画效果和响应式设计 |
| 8 | 拆分Learning Panel组件样式 | 已完成 | 2026-01-10 | `popup.css`, `components/complex/learning-panel.css`, `popup.html` | 已从popup.css中提取学习面板相关样式(行3357-4769),创建了learning-panel.css文件。包括学习面板基础样式、学习统计、进度条、每日挑战、占位符、最近学习、分页控件、学习模式切换、学习总结、闪卡模式、测验模式、拼写模式等所有学习相关样式。同时在popup.html中引入了learning-panel.css文件,并从popup.css中删除了已拆分的样式 |
| 9 | 拆分Search Bar组件样式 | 跳过 | 2026-01-10 | N/A | 经检查,Search Bar样式已包含在控制面板和页面样式中,不需要单独拆分 |
| 10 | 拆分Settings Panel组件样式 | 跳过 | 2026-01-10 | N/A | 经检查,Settings Panel样式已包含在设置页面样式中,不需要单独拆分 |
| 11 | 拆分Stat Card组件样式 | 跳过 | 2026-01-10 | N/A | 经检查,Stat Card样式已包含在首页和统计面板样式中,不需要单独拆分 |
| 12 | 拆分Word Card组件样式 | 跳过 | 2026-01-10 | N/A | 经检查,Word Card样式已包含在单词列表和单词项样式中,不需要单独拆分 |
| 13 | 拆分页面样式 | 跳过 | 2026-01-10 | N/A | 页面样式保留在popup.css中,因为它们是弹出页面特定的样式,包括Splash屏幕、页面布局、控制面板、单词列表等 |
| 14 | 拆分动画样式 | 已完成 | 2026-01-10 | `popup.css`, `components/styles/animations.css`, `popup.html` | 已创建animations.css文件,包含所有@keyframes动画定义(共40个动画)。包括Splash屏幕动画、流体边框动画、边框和装饰动画、列表和项目动画、定义和详情动画、加载和旋转动画、星标和图标动画、卡片和面板动画等。同时在popup.html中引入了animations.css文件,并从popup.css中删除了所有动画定义。文件从4183行减少到3695行 |
| 15 | 清理和优化 | 已完成 | 2026-01-10 | `popup.css`, `popup.html`, 所有CSS文件 | 已完成所有CSS组件化拆分工作。popup.css现在只包含弹出页面特定的样式(Splash屏幕、页面布局、控制面板、单词列表等),所有基础组件样式已拆分到components/目录,所有动画已拆分到animations.css。CSS文件加载顺序已优化:variables.css → reset.css → utils.css → animations.css → 各基础组件CSS → learning-panel.css → popup.css。所有样式功能正常,无样式冲突 |

## 验证方法
1. **视觉验证**：检查拆分前后样式是否一致
2. **功能验证**：测试所有交互功能是否正常
3. **代码检查**：检查CSS语法错误和样式冲突
4. **性能验证**：确保页面加载速度不受影响
5. **兼容性验证**：在不同Chrome版本中测试

## 风险评估和应对措施

| 风险 | 应对措施 |
|------|----------|
| 样式冲突 | 采用BEM命名规范，确保样式类名唯一性 |
| 功能失效 | 每一步都进行视觉和功能验证，确保无变化 |
| 加载顺序问题 | 明确CSS加载顺序，基础样式优先 |
| 冗余代码 | 定期清理冗余样式，优化CSS结构 |
| 开发效率降低 | 制定详细的计划，按步骤执行，避免返工 |

## 预期成果
1. 完整的CSS组件化架构
2. 与JS组件一一对应的CSS文件结构
3. 清晰的BEM命名规范
4. 优化的CSS加载顺序
5. 无样式冲突和功能失效
6. 便于维护和扩展的样式系统

## 后续优化建议
1. 引入CSS预处理器（如Sass），使用变量、混合宏等特性
2. 实现CSS Modules，进一步隔离样式作用域
3. 建立主题系统，支持动态主题切换
4. 实现样式的按需加载
5. 建立样式文档和规范

## 版本控制
- 初始版本：v1.0.0
- 计划完成版本：v1.1.0
