<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¿»è¯‘åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #45a049;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .test-text {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>ç¿»è¯‘åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>åŸºç¡€åŠŸèƒ½æµ‹è¯•</h2>
        <p>é€‰æ‹©ä¸‹é¢çš„æ–‡æœ¬è¿›è¡Œç¿»è¯‘æµ‹è¯•ï¼š</p>
        <div class="test-text">
            Hello world! This is a test paragraph for translation functionality. 
            You can select any word or phrase to translate it. 
            The translation should appear when you select text and press Enter or Space.
        </div>
        
        <button class="test-button" onclick="testBasicTranslation()">æµ‹è¯•åŸºç¡€ç¿»è¯‘</button>
        <button class="test-button" onclick="testTextSelection()">æµ‹è¯•æ–‡æœ¬é€‰æ‹©</button>
        <button class="test-button" onclick="testHighlight()">æµ‹è¯•é«˜äº®åŠŸèƒ½</button>
        <button class="test-button" onclick="showDebugInfo()">æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</button>
        
        <div id="status"></div>
    </div>

    <div class="test-section">
        <h2>æ€§èƒ½æµ‹è¯•</h2>
        <p>è¿è¡Œæ€§èƒ½æµ‹è¯•æ¥æ£€æŸ¥ä¼˜åŒ–æ•ˆæœï¼š</p>
        <button class="test-button" onclick="runPerformanceTest()">è¿è¡Œæ€§èƒ½æµ‹è¯•</button>
        <div id="performance-results"></div>
    </div>

    <div class="test-section">
        <h2>ä½¿ç”¨è¯´æ˜</h2>
        <ul>
            <li><strong>æ–‡æœ¬é€‰æ‹©ç¿»è¯‘ï¼š</strong> é€‰æ‹©ä»»æ„æ–‡æœ¬ï¼ŒæŒ‰ Enter æˆ–ç©ºæ ¼é”®è§¦å‘ç¿»è¯‘</li>
            <li><strong>å³é”®ç¿»è¯‘ï¼š</strong> é€‰æ‹©æ–‡æœ¬åå³é”®ç‚¹å‡»</li>
            <li><strong>é«˜äº®ç‚¹å‡»ï¼š</strong> ç‚¹å‡»å·²é«˜äº®çš„å•è¯æŸ¥çœ‹è¯¦æƒ…</li>
            <li><strong>æ€§èƒ½ç›‘æ§ï¼š</strong> ç‚¹å‡»å³ä¸Šè§’ ğŸ“Š å›¾æ ‡æŸ¥çœ‹æ€§èƒ½é¢æ¿</li>
            <li><strong>å¿«æ·é”®ï¼š</strong> Ctrl+Shift+P æ‰“å¼€/å…³é—­æ€§èƒ½ç›‘æ§</li>
        </ul>
    </div>

    <script>
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
            
            // 3ç§’åæ¸…é™¤çŠ¶æ€
            setTimeout(() => {
                statusDiv.textContent = '';
                statusDiv.className = 'status';
            }, 3000);
        }

        function testBasicTranslation() {
            showStatus('æ­£åœ¨æµ‹è¯•åŸºç¡€ç¿»è¯‘åŠŸèƒ½...', 'info');
            
            if (window.debugTranslation) {
                window.debugTranslation.testTranslation()
                    .then(() => showStatus('åŸºç¡€ç¿»è¯‘æµ‹è¯•å®Œæˆ', 'success'))
                    .catch(err => showStatus(`ç¿»è¯‘æµ‹è¯•å¤±è´¥: ${err.message}`, 'error'));
            } else {
                showStatus('è°ƒè¯•åŠŸèƒ½æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
            }
        }

        function testTextSelection() {
            showStatus('æ­£åœ¨æµ‹è¯•æ–‡æœ¬é€‰æ‹©åŠŸèƒ½...', 'info');
            
            if (window.debugTranslation) {
                window.debugTranslation.testTextSelection();
                showStatus('æ–‡æœ¬é€‰æ‹©æµ‹è¯•å®Œæˆï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°', 'success');
            } else {
                showStatus('è°ƒè¯•åŠŸèƒ½æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
            }
        }

        function testHighlight() {
            showStatus('æ­£åœ¨æµ‹è¯•é«˜äº®åŠŸèƒ½...', 'info');
            
            if (window.debugTranslation) {
                window.debugTranslation.testHighlight()
                    .then(() => showStatus('é«˜äº®æµ‹è¯•å®Œæˆ', 'success'))
                    .catch(err => showStatus(`é«˜äº®æµ‹è¯•å¤±è´¥: ${err.message}`, 'error'));
            } else {
                showStatus('è°ƒè¯•åŠŸèƒ½æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
            }
        }

        function showDebugInfo() {
            if (window.debugTranslation) {
                window.debugTranslation.checkStatus();
                showStatus('è°ƒè¯•ä¿¡æ¯å·²è¾“å‡ºåˆ°æ§åˆ¶å°', 'success');
            } else {
                showStatus('è°ƒè¯•åŠŸèƒ½æœªåŠ è½½', 'error');
            }
        }

        function runPerformanceTest() {
            showStatus('æ­£åœ¨è¿è¡Œæ€§èƒ½æµ‹è¯•...', 'info');
            
            if (window.highlightPerformanceTest) {
                window.highlightPerformanceTest.runPerformanceTest()
                    .then(() => showStatus('æ€§èƒ½æµ‹è¯•å®Œæˆ', 'success'))
                    .catch(err => showStatus(`æ€§èƒ½æµ‹è¯•å¤±è´¥: ${err.message}`, 'error'));
            } else {
                showStatus('æ€§èƒ½æµ‹è¯•åŠŸèƒ½æœªåŠ è½½', 'error');
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„æ£€æŸ¥
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (window.debugTranslation) {
                    showStatus('ç¿»è¯‘åŠŸèƒ½å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•', 'success');
                } else {
                    showStatus('ç¿»è¯‘åŠŸèƒ½æœªå®Œå…¨åŠ è½½ï¼Œè¯·æ£€æŸ¥æ’ä»¶', 'error');
                }
            }, 2000);
        });
    </script>
</body>
</html>
